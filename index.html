<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assignment for Front-End Developers</title>

    <!-- Stylesheet -->
    <link rel="stylesheet" href="assets/css/style.css">

</head>



 <!-- Header with Navbar -->
 <header>
    <nav class="navbar">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="wishlist.html">Wishlist</a></li>
      </ul>
    </nav>
  </header>

  <!-- Main Content -->
  <main>
    <!-- Section for Search and Filter -->
    <section class="search-filter">
    
    <div class="book-search">
        <input checked="" class="checkbox" type="checkbox"> 
        <div class="mainbox">
            <div class="iconContainer">
                <svg viewBox="0 0 512 512" height="1em" xmlns="http://www.w3.org/2000/svg" class="search_icon">
                    <path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"></path>
                </svg>
            </div>
            <input class="search_input" placeholder="search" type="text">
        </div>
    </div>
        

      <select id="genreFilter" class="filter-dropdown">
        <option value="">Filter by Genre</option>
        <option value="Fiction">Fiction</option>
        <option value="Thriller">Thriller</option>
        <option value="Science">Science</option>
      </select>
    </section>

    <!-- Section for Book List -->
    <section class="book-list-section">
      <div class="book-list" id="bookList">

              <!-- Preloader -->
      <div class="preloader-wrapper" id="preloader">
        <div class="dot-spinner">
          <div class="dot-spinner__dot"></div>
          <div class="dot-spinner__dot"></div>
          <div class="dot-spinner__dot"></div>
          <div class="dot-spinner__dot"></div>
          <div class="dot-spinner__dot"></div>
          <div class="dot-spinner__dot"></div>
          <div class="dot-spinner__dot"></div>
          <div class="dot-spinner__dot"></div>
      </div>
      </div>
        
        <!-- List will appear here -->
       
      </div>
    </section>

    <!-- Pagination Section -->
    <section class="pagination-section">
      <ul id="border-pagination">
        <li><a class="" href="#">«</a></li>
        <li><a href="#">1</a></li>
        <li><a href="#" class="active">2</a></li>
        <li><a href="#">3</a></li>
        <li><a href="#">4</a></li>
        <li><a href="#">...</a></li>
        <li><a href="#">6</a></li>
        <li><a href="#">7</a></li>
        <li><a href="#">»</a></li>
      </ul> 
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <p>© 2024 Book Library</p>
  </footer>


    <!-- Script JS -->
    <script src="assets/js/script.js"></script>

    <script>
      async function apiCall(url, method = 'GET', data = null) {
          const options = {
              method: method, // GET, POST, PUT, DELETE, etc.
              headers: {
              'Content-Type': 'application/json', // Specify content type if needed
              // Add any other headers as necessary
              },
          };

          // Add the request body if it's not a GET request
          if (data && method !== 'GET') {
              options.body = JSON.stringify(data);
          }

          try {
              const response = await fetch(url, options);
              
              // Check if the request was successful
              if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
              }

              // Parse and return the JSON response
              const result = await response.json();
              return result;
          } catch (error) {
              console.error('There was an error making the API call:', error);
              return null;
          }
      }

      // Usage example for a GET request
      apiCall('https://gutendex.com/books/?page=1')
      .then(handleResponse)
      .catch(error => console.error(error));

      function handleResponse(response) {
          generateHtml(response.results);
      }

      function generateHtml(dataList) {
          const dataListWrapper = document.getElementById('bookList');
          dataListWrapper.innerHTML = '';

          let innerHtml = '';
          dataList.forEach(data => {
            innerHtml += `
        <article class="book-card">
          <img src="${data.formats['image/jpeg']}" alt="${data.title}" class="book-cover">
          <div class="book-info">
            <h2 class="book-title">${data.title}</h2>
            `;
            if(data.authors.length > 0) {
                  innerHtml += `<p class="book-author">Author: <span>${data.authors[0].name}</span></p>`;
              }
              else {
                  innerHtml += `<p class="book-author">Author: <span>N/A</span></p>`;
              }
            innerHtml += `
            <p class="book-genre">Genre: <span>${data.subjects[0]}</span></p>
            <p class="book-id">ID: <span>${data.id}</span> </p>

            <button class="wishlist-btn" onclick="toggleWishlist('12345')">&#10084;</button> <!-- Wishlist Icon -->
          </div>
        </article>
            `;
          });

          dataListWrapper.innerHTML = innerHtml;
      }
  </script>

  <script>
    function showPreloader() {
      const preloader = document.getElementById('preloader');
      if (preloader) {
        preloader.style.display = 'flex';  // Show the preloader
      }
    }

    function hidePreloader() {
      const preloader = document.getElementById('preloader');
      if (preloader) {
        preloader.style.display = 'none';  // Hide the preloader
      }
    }
  </script>
</body>
</html>